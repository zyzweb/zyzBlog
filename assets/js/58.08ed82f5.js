(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{501:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("ESLint 可以通过 .eslintrc 或 package.json 中的 eslintConfig 字段进行配置。")]),t._v(" "),s("p",[t._v("vue cli3中关闭eslint检测  vue.config.js  中添加 lintOnSave:false   关闭服务器端")]),t._v(" "),s("p",[t._v("代码注意点")]),t._v(" "),s("p",[t._v("[ ( ` 以这三个开头的时候注意要加一个分号")]),t._v(" "),s("p",[t._v("eslint插件都是eslint-plugin开头的")]),t._v(" "),s("p",[t._v("extends中是预定义规则")]),t._v(" "),s("p",[t._v('quotes: ["warn", "double"], 必须是双引号,否则视为error')]),t._v(" "),s("p",[t._v('semi: "warn", 必须没有;否则视为warn')]),t._v(" "),s("p",[t._v("可以在不同的文件夹放.eslintrc文件")]),t._v(" "),s("p",[t._v("没有指定代码风格默认extends:eslint:recommended")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("/* eslint-disable */  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#忽略全文")]),t._v("\n/* eslint-enable */  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#取消忽略全文")]),t._v("\n\n@ts-ignore "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#当行忽略")]),t._v("\n@ts-nocheck "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#忽略全文")]),t._v("\n@ts-check  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#取消忽略全文")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#用eslint对typescript进行检测需要安装如下包")]),t._v("\ntypescript\neslint   \n@typescript-eslint/eslint-plugin  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提供typescript语法规则")]),t._v("\n@typescript-eslint/parser  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解析typescript")]),t._v("\n\n\n\neslint\neslint-config-airbnb-base\neslint-config-prettier\neslint-plugin-import\neslint-plugin-prettier\neslint-plugin-vue\n\n\n\nhusky\nlint-staged\n")])])]),s("h3",{attrs:{id:"husky-git-hook工具-能够提供钩子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#husky-git-hook工具-能够提供钩子"}},[t._v("#")]),t._v(" husky(git hook工具,能够提供钩子)")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" husky --save-dev  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#husky支持的钩子 常见的有pre-commit pre-push commit-msg  详细看https://git-scm.com/docs/githooks")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 方法一放在package.json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"husky"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hooks"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pre-commit"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run test"')]),t._v(",\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pre-push"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm  run test"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 方法二放在.huskyrc，.huskyrc.json，.huskyrc.js  .husky目录")]),t._v("\n")])])]),s("h3",{attrs:{id:"commitlint-提供提交规范和对规范的校验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commitlint-提供提交规范和对规范的校验"}},[t._v("#")]),t._v(" commitlint(提供提交规范和对规范的校验)")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev @commitlint/config-conventional @commitlint/cli  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置文件commitlint.config.js 或 .commitlintrc.js")]),t._v("\n")])])]),s("h3",{attrs:{id:"lint-staged-文件过滤工具-过滤出暂存区文件-只是一个平台不提供格式化功能-依赖husky"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lint-staged-文件过滤工具-过滤出暂存区文件-只是一个平台不提供格式化功能-依赖husky"}},[t._v("#")]),t._v(" lint-staged(文件过滤工具,过滤出暂存区文件,只是一个平台不提供格式化功能) 依赖husky")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#package.json中引入或者.lintstagedrc、lint-staged.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lint-staged"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*.js"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint --fix"')]),t._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git add"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"stylelint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stylelint"}},[t._v("#")]),t._v(" stylelint")]),t._v(" "),s("h2",{attrs:{id:"代码提交规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码提交规范"}},[t._v("#")]),t._v(" 代码提交规范")]),t._v(" "),s("h3",{attrs:{id:"_1-git-husky-和-eslint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-git-husky-和-eslint"}},[t._v("#")]),t._v(" 1. git Husky 和 eslint")]),t._v(" "),s("p",[t._v("项目开发一般使用了 eslint ，但是不能保证组员提交代码之前都将 eslint 中的问题解决掉了：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("也就是我们希望保证代码仓库中的代码都是符合 eslint 规范的；")])]),t._v(" "),s("li",[s("p",[t._v("那么我们需要在组员执行 "),s("code",[t._v("git commit")]),t._v(" 命令的时候对其进行校验，如果不符合 eslint 规范，那么自动通过规范进行修复；")])])]),t._v(" "),s("p",[t._v("那么如何做到这一点呢？可以通过 Husky 工具：")]),t._v(" "),s("ul",[s("li",[t._v("husky 是一个 git hook 工具，可以帮助我们触发 git 提交的各个阶段：pre-commit、commit-msg、pre-push")])]),t._v(" "),s("p",[t._v("如何使用 husky 呢？")]),t._v(" "),s("p",[t._v("这里我们可以使用自动配置命令：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("npx husky-init "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),s("p",[t._v("注意：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("如果在编辑器终端安装需要把"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("放在引号"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("里面。\n")])])]),s("p",[t._v("这里会做三件事：")]),t._v(" "),s("p",[t._v("1.安装 husky 相关的依赖：")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://static01.imgkr.com/temp/627e32430c174e14b5e1bca9059e3d59.jpg",alt:"huksy"}})]),t._v(" "),s("p",[t._v("2.在项目目录下创建 "),s("code",[t._v(".husky")]),t._v(" 文件夹：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npx huksy install\n")])])]),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqq16zo75j307703mt8m.jpg",alt:"huksy"}})]),t._v(" "),s("p",[t._v("3.在 package.json 中添加一个脚本：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqq26phpxj30dj06fgm3.jpg",alt:"package.json"}})]),t._v(" "),s("p",[t._v("接下来，我们需要去完成一个操作：在进行 commit 时，执行 lint 脚本：")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://static01.imgkr.com/temp/7fea73aa8ecd421fae9143a34054c7e4.jpg",alt:"pre-commit"}})]),t._v(" "),s("p",[t._v("这个时候我们执行 git commit 的时候会自动对代码进行 lint 校验。")]),t._v(" "),s("h3",{attrs:{id:"_2-git-commit-规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-git-commit-规范"}},[t._v("#")]),t._v(" 2. git commit 规范")]),t._v(" "),s("h4",{attrs:{id:"_2-1-代码提交风格"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-代码提交风格"}},[t._v("#")]),t._v(" 2.1. 代码提交风格")]),t._v(" "),s("p",[t._v("通常我们的 git commit 会按照统一的风格来提交，这样可以快速定位每次提交的内容，方便之后对版本进行控制。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw17gaqjj30to0cj3zp.jpg",alt:""}})]),t._v(" "),s("p",[t._v("但是如果每次手动来编写这些是比较麻烦的事情，我们可以使用一个工具：Commitizen")]),t._v(" "),s("ul",[s("li",[t._v("Commitizen 是一个帮助我们编写规范 commit message 的工具；")])]),t._v(" "),s("ol",[s("li",[t._v("安装 Commitizen")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" commitizen "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("安装 cz-conventional-changelog，并且初始化 cz-conventional-changelog：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("npx commitizen init cz-conventional-changelog --save-dev --save-exact\n")])])]),s("p",[t._v("这个命令会帮助我们安装 cz-conventional-changelog：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqvz2odi4j30ek00zmx2.jpg",alt:"image-20210723145249096"}})]),t._v(" "),s("p",[t._v("并且在 package.json 中进行配置(自动生成)：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqvzftay5j30iu04k74d.jpg",alt:""}})]),t._v(" "),s("p",[t._v("这个时候我们提交代码需要使用 "),s("code",[t._v("npx cz")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("第一步是选择 type，本次更新的类型")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("feat")]),t._v(" "),s("td",[t._v("新增特性 (feature)")])]),t._v(" "),s("tr",[s("td",[t._v("fix")]),t._v(" "),s("td",[t._v("修复 Bug(bug fix)")])]),t._v(" "),s("tr",[s("td",[t._v("docs")]),t._v(" "),s("td",[t._v("修改文档 (documentation)")])]),t._v(" "),s("tr",[s("td",[t._v("style")]),t._v(" "),s("td",[t._v("代码格式修改(white-space, formatting, missing semi colons, etc)")])]),t._v(" "),s("tr",[s("td",[t._v("refactor")]),t._v(" "),s("td",[t._v("代码重构(refactor)")])]),t._v(" "),s("tr",[s("td",[t._v("perf")]),t._v(" "),s("td",[t._v("改善性能(A code change that improves performance)")])]),t._v(" "),s("tr",[s("td",[t._v("test")]),t._v(" "),s("td",[t._v("测试(when adding missing tests)")])]),t._v(" "),s("tr",[s("td",[t._v("build")]),t._v(" "),s("td",[t._v("变更项目构建或外部依赖（例如 scopes: webpack、gulp、npm 等）")])]),t._v(" "),s("tr",[s("td",[t._v("ci")]),t._v(" "),s("td",[t._v("更改持续集成软件的配置文件和 package 中的 scripts 命令，例如 scopes: Travis, Circle 等")])]),t._v(" "),s("tr",[s("td",[t._v("chore")]),t._v(" "),s("td",[t._v("变更构建流程或辅助工具(比如更改测试环境)")])]),t._v(" "),s("tr",[s("td",[t._v("revert")]),t._v(" "),s("td",[t._v("代码回退")])])])]),t._v(" "),s("ul",[s("li",[t._v("第二步选择本次修改的范围（作用域）")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8ca15oj30r600wmx4.jpg",alt:"image-20210723150147510"}})]),t._v(" "),s("ul",[s("li",[t._v("第三步选择提交的信息")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8mq3zlj60ni01hmx402.jpg",alt:"image-20210723150204780"}})]),t._v(" "),s("ul",[s("li",[t._v("第四步提交详细的描述信息")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8y05bjj30kt01fjrb.jpg",alt:"image-20210723150223287"}})]),t._v(" "),s("ul",[s("li",[t._v("第五步是否是一次重大的更改")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqw9z5vbij30bm00q744.jpg",alt:"image-20210723150322122"}})]),t._v(" "),s("ul",[s("li",[t._v("第六步是否影响某个 open issue")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqwar8xp1j30fq00ya9x.jpg",alt:"image-20210723150407822"}})]),t._v(" "),s("p",[t._v("我们也可以在 scripts 中构建一个命令来执行 cz(npx cz 或者 yarn/npm commit)：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gsqwc4gtkxj30e207174t.jpg",alt:"image-20210723150526211"}})]),t._v(" "),s("h3",{attrs:{id:"_3-代码提交验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-代码提交验证"}},[t._v("#")]),t._v(" 3. 代码提交验证")]),t._v(" "),s("p",[t._v("如果我们按照 cz 来规范了提交风格，但是依然有同事通过 "),s("code",[t._v("git commit")]),t._v(" 按照不规范的格式提交应该怎么办呢？")]),t._v(" "),s("ul",[s("li",[t._v("我们可以通过 commitlint 来限制提交；")])]),t._v(" "),s("ol",[s("li",[t._v("安装 @commitlint/config-conventional 和 @commitlint/cli")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i @commitlint/config-conventional @commitlint/cli "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-D")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("在根目录创建 commitlint.config.js 文件，配置 commitlint")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@commitlint/config-conventional'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("使用 husky 生成 commit-msg 文件，验证提交信息：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("npx husky "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" .husky/commit-msg "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npx --no-install commitlint --edit '),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v('"')]),t._v("\n")])])]),s("p",[t._v("https://github.com/Zhengqbbb/cz-git")]),t._v(" "),s("p",[t._v("提供一套eslint规范")]),t._v(" "),s("h3",{attrs:{id:"参考链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.jianshu.com/p/f2f06a0e154b",target:"_blank",rel:"noopener noreferrer"}},[t._v("简书-eslint入门学习整理"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000017790500",target:"_blank",rel:"noopener noreferrer"}},[t._v("segmentfault-代码风格自动化"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);