(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{709:function(e,t,r){"use strict";r.r(t);var s=r(17),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("解决跨域的2个插件")]),e._v(" "),r("p",[e._v("requestly    "),r("a",{attrs:{href:"https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf/related?hl=en-US",target:"_blank",rel:"noopener noreferrer"}},[e._v("access-control-allow-origin"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("requestly用法:")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("Access-Control-Allow-Origin: https://cdnsit.jyblife.com   "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#请求跨域 要发送cookie不能设为*")]),e._v("\nAccess-Control-Allow-Methods: POST, GET, OPTIONS  "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#服务器支持的所有跨域请求的方法")]),e._v("\nAccess-Control-Allow-Headers: X-PINGOTHER, Content-Type "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#如果包含Access-Control-Request-Headers字段，则Access-Control-Allow-Headers字段是必需")]),e._v("\nAccess-Control-Allow-Credentials: "),r("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v("   "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 否允许发送Cookie")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 预检请求头信息")]),e._v("\nAccess-Control-Request-Headers: X-Custom-Header"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("自定义"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("  "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#指定浏览器CORS请求会额外发送的头信息字段")]),e._v("\nAccess-Control-Request-Method: POST   "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#用来列出浏览器的CORS请求会用到哪些HTTP方法")]),e._v("\n\nAccess-Control-Max-Age: "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("86400")]),e._v("   "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#本次预检请求的有效期，单位为秒")]),e._v("\naccess-control-expose-headers:111  "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# XMLHttpRequest.getResponseHeader()的其他")]),e._v("\n")])])]),r("p",[e._v("引荐来源网址政策")]),e._v(" "),r("p",[e._v("strict-origin-when-cross-origin 跨域是refer只会展示origin不会展示完整地址")]),e._v(" "),r("p",[e._v("no-referrer-when-downgrade    https协议降为http协议时不发送referrer给跳转网站的服务器")]),e._v(" "),r("p",[e._v("Chrome 计划在85版开始 将其切换默认策略 no-referrer-when-downgrade 更换到 strict-origin-when-cross-origin")]),e._v(" "),r("p",[e._v("从 "),r("code",[e._v("https://site-one.example/stuff/detail?tag=red")]),e._v(" 访问 "),r("code",[e._v("https://site-two.example/…")])]),e._v(" "),r("ul",[r("li",[e._v("使用 "),r("code",[e._v("no-referrer-when-downgrade")]),e._v(": Referer: "),r("code",[e._v("https://site-one.example/stuff/detail?tag=red")]),e._v("。")]),e._v(" "),r("li",[e._v("使用 "),r("code",[e._v("strict-origin-when-cross-origin")]),e._v(": Referer: "),r("code",[e._v("https://site-one.example/")])])]),e._v(" "),r("p",[r("strong",[e._v("不变")])]),e._v(" "),r("ul",[r("li",[e._v("和 "),r("code",[e._v("no-referrer-when-downgrade")]),e._v(" 一样， "),r("code",[e._v("strict-origin-when-cross-origin")]),e._v(" 在从 "),r("code",[e._v("HTTPS")]),e._v(" 来源访问 "),r("code",[e._v("HTTP")]),e._v(" 站点时，不会携带 "),r("code",[e._v("Referer")]),e._v(" 头。")]),e._v(" "),r("li",[e._v("在相同的来源内，"),r("code",[e._v("Referer")]),e._v(" 标头值为完整的 "),r("code",[e._v("URL")])])]),e._v(" "),r("p",[e._v("显示的是预配标头")]),e._v(" "),r("p",[e._v("axios.request要这种写法,发送简单请求,公司只对post做了跨域限制没对options做跨域限制")]),e._v(" "),r("p",[e._v("headers: {\n'Content-Type': 'application/x-www-form-urlencoded'\n}")]),e._v(" "),r("h3",{attrs:{id:"问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[e._v("#")]),e._v(" 问题")]),e._v(" "),r("p",[r("img",{attrs:{src:"http://image.zhuyuanzheng1.top/image-20220223184642732.png",alt:"image-20220223184642732"}})]),e._v(" "),r("p",[r("img",{attrs:{src:"http://image.zhuyuanzheng1.top/image-20220223184731732.png",alt:"image-20220223184731732"}})]),e._v(" "),r("p",[e._v("触发了复杂请求但是options请求却没有设置Access-Control-Allow-Origin")]),e._v(" "),r("p",[e._v("设置响应头 Content-Type': 'application/x-www-form-urlencoded'")]),e._v(" "),r("p",[r("img",{attrs:{src:"http://image.zhuyuanzheng1.top/image-20220225150013475.png",alt:"image-20220225150013475"}})]),e._v(" "),r("img",{staticStyle:{zoom:"30%"},attrs:{src:"http://image.zhuyuanzheng1.top/image-20220225150046003.png",alt:"image-20220225150046003"}}),e._v(" "),r("p",[e._v("返回的是json数据,content-Type为text/plain就触发了CORB")]),e._v(" "),r("h3",{attrs:{id:"相关链接"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[e._v("#")]),e._v(" 相关链接")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/414533145",target:"_blank",rel:"noopener noreferrer"}},[e._v("关闭私域跨域"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/53996160",target:"_blank",rel:"noopener noreferrer"}},[e._v("简单跨域-西岭老湿"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2016/04/cors.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("阮一峰-cors"),r("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);