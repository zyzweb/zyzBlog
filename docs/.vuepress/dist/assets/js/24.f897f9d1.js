(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{613:function(t,s,n){"use strict";n.r(s);var a=n(17),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"基础架构发展史"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础架构发展史"}},[t._v("#")]),t._v(" 基础架构发展史")]),t._v(" "),n("ul",[n("li",[t._v("90年代是传统服务器；")]),t._v(" "),n("li",[t._v("2000年开始流行虚拟化技术;(VMware virtualbox)")]),t._v(" "),n("li",[t._v("2005年-2015年云技术Cloud开始流行；")]),t._v(" "),n("li",[t._v("2015年以后Container(容器) 时代 (docker)")]),t._v(" "),n("li")]),t._v(" "),n("h3",{attrs:{id:"基础概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础概念"}},[t._v("#")]),t._v(" 基础概念")]),t._v(" "),n("p",[t._v("镜像  容器   仓库")]),t._v(" "),n("p",[t._v("镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例")]),t._v(" "),n("p",[t._v("仓库用来储存镜像")]),t._v(" "),n("h3",{attrs:{id:"https-hub-docker-com-类似github"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#https-hub-docker-com-类似github"}},[t._v("#")]),t._v(" https://hub.docker.com/  类似github")]),t._v(" "),n("h3",{attrs:{id:"docker切换国内源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker切换国内源"}},[t._v("#")]),t._v(" docker切换国内源")]),t._v(" "),n("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://image.zhuyuanzheng1.top/image-20220608230235173.png",alt:"image-20220608230235173"}}),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#将下面的配置添加到上面,然后重启docker")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors  获取阿里云dock加速地址")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"debug"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" true,\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"experimental"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" false,\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"registry-mirrors"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://docker.mirrors.ustc.edu.cn"')]),t._v(",\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://hub-mirror.c.163.com"')]),t._v(",\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://vs83pkv4.mirror.aliyuncs.com"')]),t._v("  \n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#linux换源  或者在宝塔面板软件管理操作")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/docker/daemon.json  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#增加文件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#复制如下内容:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"registry-mirrors"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://mirror.ccs.tencentyun.com"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl restart "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重启docker")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" info "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看换源是否成功")]),t._v("\n")])])]),n("h2",{attrs:{id:"docker常用命令行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker常用命令行"}},[t._v("#")]),t._v(" docker常用命令行")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("Ctrl + d /exit "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#退出当前容器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#列出本机所有镜像")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看容器是否在运行及其他状态  running/Up 运行中  exited  停止  ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -a "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看所有docker容器(包括已经停止的)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs  2b1b7a428627  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在宿主机查看容器输出")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" stop  2b1b7a428627  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止容器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull ubuntu "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#载入镜像  docker pull whyour/qinglong:2.10.6 拉取指定镜像")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull docker.fe.jyb.com/jfet\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it 9b302e5d383c /bin/bash   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入容器(退出不会导致容器退出)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" --help    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看某个命令的帮助说明,其他命令行也类似")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" port cafb276b7800   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看指定容器的端口映射情况")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" search mysql   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#搜索镜像")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -aq"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除所有容器 -aq就是-a -q 类似 -am(git提交) 要先停止才能删除")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" stop "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" -aq"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止所有容器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" rmi 9873176a8ff5   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除镜像(通过镜像id)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run -it --rm  ubuntu  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" etc/resolv.conf  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看ubuntu容器的dns")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run --name nginx-test -p "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(":80 -d nginx  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#以name为nginx-test,本地端口代理容器80端口,在后台启动容器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" start  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动docker服务")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" info "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看docker详细信息")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#docker-compose 命令")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" pull "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#更新镜像(要切换到指定文件夹)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" up -d "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动并运行整个应用程序(在后台)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" down "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" --version  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看docker-compose版本")]),t._v("\n")])])]),n("p",[t._v("docker-compose可以调用dockerfile和docker-compose.yml 运行多个容器")]),t._v(" "),n("p",[t._v("docker compose  代替了手写docker的各个步骤")]),t._v(" "),n("div",{staticClass:"language-yml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gitlab")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gitlab/gitlab-ce:latest'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'47.107.149.52'")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#改成你部署的服务器(宿主机)的固定ip地址")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("GITLAB_OMNIBUS_CONFIG")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n      external_url 'http://47.107.149.52'\n      # Add any other gitlab.rb configuration here, each on its own line")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5678:80'")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#映射到本机的80端口防止端口占用 访问地址就是http://47.107.149.52")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'7443:443'")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#映射宿主机的文件目录到运行的镜像里面 保证镜像的重启等不会造成数据的丢失")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/data/gitlab/config:/etc/gitlab'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/data/gitlab/logs:/var/log/gitlab'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/data/gitlab/data:/var/opt/gitlab'")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gitlab-runner")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gitlab/gitlab"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unless"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("stopped\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("privileged")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /data/runner/gitlab"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/gitlab"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("runner\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /var/run/docker.sock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/run/docker.sock  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#宿主机机的docker.sock映射到镜像里面")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /usr/bin/docker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/bin/docker "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#宿主机的docker可执行映射到镜像里面 后面build的时候会用到")]),t._v("\n\n")])])]),n("p",[t._v("进入gitlab文件夹里面启动docker")]),t._v(" "),n("p",[t._v("卡住 重启系统 结束进程")]),t._v(" "),n("h3",{attrs:{id:"将下面的配置添加到上面-然后重启docker"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将下面的配置添加到上面-然后重启docker"}},[t._v("#")]),t._v(" 将下面的配置添加到上面,然后重启docker")]),t._v(" "),n("p",[t._v('#https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors  获取阿里云dock加速地址 { "debug": true, "experimental": false, "registry-mirrors": [ "https://docker.mirrors.ustc.edu.cn", "https://hub-mirror.c.163.com", "https://vs83pkv4.mirror.aliyuncs.com" ] }')]),t._v(" "),n("p",[t._v("linux安装docker")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -fsSL "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("get.docker.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://get.docker.com/"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" -o "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("get-docker.sh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://get-docker.sh/"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#下载安装文件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("get-docker.sh"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("http://get-docker.sh"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装docker ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" version "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看docker版本")]),t._v("\nsystemctl start "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动docker(客户端 服务端)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" container run nginx "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装nginx容器 没有会去docker hub安装")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" container "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看所有容器(只有打开的容器) docker container ls -a  查看全部容器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" container stop 3e "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止容器")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build -t jfet:latest "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#构建镜像  Dockfile在根目录")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" image save nginx -o ngingx.image  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导出镜像")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" image load -i ./nginx.image "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导入镜像")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" image "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" 3e  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看镜像的层数")]),t._v("\n")])])]),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#同个镜像跑多个容器,或者一个容器一个容器开")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#docker-compose.yml")]),t._v("\n\nversion: "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.0'")]),t._v("\nservices:\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##第一个青龙")]),t._v("\n  q1:\n    image: whyour/qinglong:2.10.6\n    container_name: ql1\n    restart: always\n    volumes:\n       - ./ql1/config:/ql/config\n       - ./ql1/scripts:/ql/scripts\n       - ./ql1/repo:/ql/repo\n       - ./ql1/log:/ql/log\n       - ./ql1/db:/ql/db\n       - ./ql1/jbot:/ql/jbot\n       - ./ql1/raw:/ql/raw\n    ports:\n       - "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5801")]),t._v(":5700\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##第二个青龙")]),t._v("\n  q2:\n    image: whyour/qinglong:latest\n    container_name: ql2\n    restart: always\n    volumes:\n       - ./ql2/config:/ql/config\n       - ./ql2/scripts:/ql/scripts\n       - ./ql2/repo:/ql/repo\n       - ./ql2/log:/ql/log\n       - ./ql2/db:/ql/db\n       - ./ql2/jbot:/ql/jbot\n       - ./ql2/raw:/ql/raw\n    ports:\n       - "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5802")]),t._v(":5700\n")])])]),n("p",[t._v("windows和mac安装自带了,linux需要自行安装,有命令和yml文件")]),t._v(" "),n("h3",{attrs:{id:"导入image的3种方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导入image的3种方式"}},[t._v("#")]),t._v(" 导入image的3种方式")]),t._v(" "),n("ol",[n("li",[t._v("pull from registry  "),n("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("hub.docker.com"),n("OutboundLink")],1),t._v("   https://quay.io/")]),t._v(" "),n("li",[t._v("Dockfile online")]),t._v(" "),n("li",[t._v("自有文件导入")])]),t._v(" "),n("p",[t._v("gitlab 管理员账号密码   root   secret_pass")]),t._v(" "),n("h3",{attrs:{id:"查看docker网桥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看docker网桥"}},[t._v("#")]),t._v(" 查看docker网桥")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:"http://image.zhuyuanzheng1.top/image-20220425133215694.png",alt:"image-20220425133215694"}})]),t._v(" "),n("h3",{attrs:{id:"常见问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重启docker失败")]),t._v("\nsystemctl reset-failed "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#关闭")]),t._v("\nsystemctl start "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动")]),t._v("\n")])])]),n("h3",{attrs:{id:"容器代理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#容器代理"}},[t._v("#")]),t._v(" 容器代理")]),t._v(" "),n("p",[t._v("1.容器用docker内的代理")]),t._v(" "),n("p",[t._v("2.容器用docker外的代理")]),t._v(" "),n("h3",{attrs:{id:"参考链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/daqiang012/article/details/118765409",target:"_blank",rel:"noopener noreferrer"}},[t._v("修改docker中gitlab的root账号的密码"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000040801945",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitlab-ci入门"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844904185079545863",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker部署gitlab"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844903984554049544",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker部署gitlab2"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1718368",target:"_blank",rel:"noopener noreferrer"}},[t._v("搭建私有docker库"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("docker run -dit \\\n  -v $PWD/ql:/ql/data \\\n  -p 5701:5700 \\\n  --name qinglong \\\n  --hostname qinglong \\\n  --restart unless-stopped \\\n  whyour/qinglong:2.10.12\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("docker run -dit \\\n  -v $PWD/ql1/config:/ql/config \\\n  -v $PWD/ql1/log:/ql/log \\\n  -v $PWD/ql1/db:/ql/db \\\n  -v $PWD/ql1/repo:/ql/repo \\\n  -v $PWD/ql1/raw:/ql/raw \\\n  -v $PWD/ql1/scripts:/ql/scripts \\\n  -v $PWD/ql1/jbot:/ql/jbot \\\n  -v $PWD/ql1/deps:/ql/deps \\\n  -p 5703:5700\\\n  --name ql1 \\\n  --hostname ql1 \\\n  --restart unless-stopped \\\n  whyour/qinglong:2.10.12\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);