(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{662:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("原理:  将内网穿透软件部署在具有公网ip的机器上,比如服务器,开通了公网ip的路由器")]),t._v(" "),a("p",[t._v("主要用的是frp 类似的还有花生壳  ngork(ngrok.cc)")]),t._v(" "),a("h3",{attrs:{id:"frp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frp"}},[t._v("#")]),t._v(" frp")]),t._v(" "),a("p",[t._v("ios "),a("a",{attrs:{href:"https://github.com/wsvn53/scrcpy-ios/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("scrcpy-ios"),a("OutboundLink")],1),t._v("   通过这个打卡")]),t._v(" "),a("p",[t._v("还有另一种方法用VNC也可以实现远程控制,scrcpy更流畅")]),t._v(" "),a("h3",{attrs:{id:"frp客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frp客户端"}},[t._v("#")]),t._v(" frp客户端")]),t._v(" "),a("p",[t._v("android  "),a("a",{attrs:{href:"https://github.com/HaidyCao/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("frp"),a("OutboundLink")],1)]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://github.com/fatedier/frp",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载frp客户端和服务端"),a("OutboundLink")],1),t._v("   m1下arm64   服务端下linux amd64")]),t._v(" "),a("li",[t._v("客户端保留frpc frpc.ini    服务端保留frps frps.ini")])]),t._v(" "),a("p",[t._v("默认端口7000 打开服务器和宝塔的防火墙")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("./frpc -c frpc.ini   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#frp客户端启动")]),t._v("\n./frps -c frps.ini   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#frp服务端启动")]),t._v("\n")])])]),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#frpc.ini")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("42.193.248.139")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("6999")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; protocol = kcp   #kcp基于udp的协议")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; token = 12345678        #连接frp服务端的密码 不生效待研究?")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("web")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; 没有域名就用tcp,http需要绑定域名")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("tcp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("remote_port")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("8097  #尽量和本地保持一致,并在宝塔上开通端口")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("8097")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; local_ip = 127.0.0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; local_ip = 172.16.5.68")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_ip")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("0.0.0.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; custom_domains = zhuyuanzheng.top #域名需和服务器绑定")]),t._v("\n")])])]),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#frps.ini ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /usr/local/frp ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; frp服务器监听地址，如果是IPV6地址必须用中括号包围")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_addr")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("0.0.0.0")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v(";frp服务器监听端口")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_port")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("6999")]),t._v("   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; protocol = kcp    #指定使用的协议，默认tcp，可选kcp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; kcp_bind_port = 7000   #kcp是基于udp的协议  kcp的udp监听端口")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; token = 12345678        #客户端连接服务端的密码")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 仪表盘端口，只有设置了才能使用仪表盘（即后台）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; dashboard_port = 7500")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 仪表盘访问的用户名密码，如果不设置，则默认都是 admin")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; dashboard_user = admin")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; dashboard_pwd = admin")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# http、https监听端口（端口可以自定义，外网服务器的对应端口要开放)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("vhost_http_port")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("8000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("; vhost_https_port = 10443")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Web后台的静态资源目录，调试用的，一般不设")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#assets_dir = ./static")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#日志输出，可以设置为具体的日志文件或者console")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log_file = /var/log/frps.log")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#日志记录等级，有trace, debug, info, warn, error")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log_level = info")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#日志保留时间")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log_max_days = 3")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启用特权模式，从v0.10.0版本开始默认启用特权模式，且目前只能使用特权模式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#privilege_mode = true")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#特权模式Token，请尽量长点且复杂")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#privilege_token = 12345678")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#特权模式允许分配的端口范围")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#privilege_allow_ports = 2000-3000,3001,3003,4000-50000")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#心跳超时，不用改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#heartbeat_timeout = 90")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#每个代理可以设置的连接池上限")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#max_pool_count = 5")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#认证超时时间，一般不用改")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#authentication_timeout = 900")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果配置了这个，当你的模式为http或https时，就能设置子域名subdomain")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#subdomain_host = frps.com")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#是否启用tcp多路复用，默认就是true，不用管")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#tcp_mux = true")]),t._v("\n")])])]),a("h3",{attrs:{id:"systemctl配置frp自动启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#systemctl配置frp自动启动"}},[t._v("#")]),t._v(" systemctl配置frp自动启动")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /lib/systemd/system/frps.service\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在frps.service里写入以下内容")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("fraps "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("network.target syslog.target\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Wants")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("network.target\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("simple\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动服务的命令（此处写你的frps的实际安装目录）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/frp/frps -c /usr/local/frp/frps.ini\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("multi-user.target\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#然后就启动frps")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start frps\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#再打开自启动")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" frps\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#有用的命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl restart frps  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重启应用   或者  service frp start")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl stop frps "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止应用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl status frps "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看日志")]),t._v("\n")])])]),a("h3",{attrs:{id:"常见错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[t._v("#")]),t._v(" 常见错误")]),t._v(" "),a("p",[t._v("错误1(frps)：Create vhost http listener error, listen tcp 0.0.0.0:80: bind: An attempt was made to access a socket in a way forbidden by its access permissions.")]),t._v(" "),a("p",[t._v("解决方法：端口被其他应用程序占用，关闭其他应用程序或改用其他端口。")]),t._v(" "),a("p",[t._v("错误2(frpc)：[rdp] start error: port already used\n解决方法：远程端口已被使用，改用其他端口。")]),t._v(" "),a("p",[t._v("错误3(frpc)：[web01] start error: proxy name [web01] is already in use\n解决方法：代理名称[web01]已被使用，检查并更换一个代理名称。")]),t._v(" "),a("p",[t._v("错误4(frpc)：[web01] start error: router config conflict\n解决方法：[web01]指定的域名(custom_domains)已被使用，检查并更换其他域名。")]),t._v(" "),a("p",[t._v("错误5(frpc)：work connection closed, EOF\n解决方法：防火墙未打开,或者frp为正常运行,开下宝塔防火墙的状态")]),t._v(" "),a("h3",{attrs:{id:"可以提供给别人使用-改下端口-然后在宝塔放行端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可以提供给别人使用-改下端口-然后在宝塔放行端口"}},[t._v("#")]),t._v(" 可以提供给别人使用 改下端口,然后在宝塔放行端口")])])}),[],!1,null,null,null);s.default=e.exports}}]);